!function(f){"use strict";var e=f(window),u=f("body"),m=window.minimog.Helpers;function r(e,t,a,i,n){n=n.parents(".row-isw-swatch").first();(n.hasClass("row-isw-swatch--isw_color")||n.hasClass("row-isw-swatch--isw_image"))&&n.find(".selected-term-name").html(i)}function o(e,t){var i,e=f(e.html()),d=(u.append(e),e.find(".product-container")),c=d.find(".woo-single-info"),a=d.find(".woo-single-images"),n=e.find(".cart.variations_form"),r=(0<n.length&&"undefined"!=typeof wc_add_to_cart_variation_params&&(n.wc_variation_form(),"undefined"!=typeof isw)&&void 0!==isw.Swatches&&isw.Swatches.register(n),e.find(".variations_form")),l=a.children(".woo-single-gallery"),a=l.children(".minimog-main-swiper"),o={},p=(l.hasClass("has-thumbs-slider")&&(o={thumbs:{swiper:l.children(".minimog-thumbs-swiper").MinimogSwiper()}}),0<a.length&&a.MinimogSwiper(o),s(),l.on("minimog_wc_gallery_init_light_gallery",s),!0);function s(){f.fn.lightGallery&&l.hasClass("has-light-gallery")&&(l.removeData("lightGallery"),l.lightGallery(window.minimog.LightGallery))}767<window.innerWidth-m.getScrollbarWidth()&&(i=l,new Promise((e,t)=>{var a=setInterval(function(){0<i.height()&&(clearInterval(a),e())},50)}).then(e=>{var t=l.height(),a=t,i=t,n=window.innerHeight-60,r=c,o=(p=!1,d.data("quick-view")),s=2*o.spacing;o.imageCover?(r=d.find(".quick-view-col-summary .inner-content"),a=t+s,i=Math.min(n,a),0<o.spacing?i-=s:i-=60):(a=t+s,i=Math.min(n,a),i-=s),r.outerHeight(parseInt(i)),f.fn.perfectScrollbar&&!m.isHandheld()&&r.perfectScrollbar({suppressScrollX:!0}),o.imageCover&&d.find(".woo-single-images").addClass("image-cover")})),r.find('select[name="quantity"]').MinimogNiceSelect({renderTarget:n.find(".row-isw-swatch-quantity-wrap")}),e.MinimogModal({removeOnClose:!0,perfectScrollbar:p}),0<a.length&&a.children(".swiper-inner").children(".swiper-container")[0].swiper.update(),t.removeClass("loading")}f(document).ready(function(){f(document.body).on("click",".modal-quick-view-popup .woosw-btn",function(){var e=f(this).closest(".modal-quick-view-popup");0<e.length&&f.fn.MinimogModal&&e.MinimogModal("close")}),f(".minimog-product").on("click",".quick-view-btn",function(e){e.preventDefault(),e.stopPropagation();var t,a=f(this);a.hasClass("loading")||f.fn.MinimogModal&&(a.addClass("loading"),e=a.data("pid"),0<(t=u.children("#modal-quick-view-product-"+e)).length?o(t,a):(e={pid:e},f.ajax({url:$minimogWoo.wc_ajax_url.toString().replace("%%endpoint%%","minimog_product_quick_view"),type:"GET",data:f.param(e),dataType:"json",cache:!0,success:function(e){t=f(e.template),u.append(t),o(t,a)}})))}),function(){if("undefined"==typeof wc_add_to_cart_params)return;f(document).on("click",".ajax_add_variation_to_cart",function(e){e.preventDefault(),e.stopPropagation();var t=f(this),e=t.data("quantity"),a=0,i={},n=t.siblings('select[name="product_variation_id"]');if(0<n.length){n=n.children(":selected"),a=n.data("variation-id"),i=n.val();i=JSON.parse(i)}else{n=t.parents(".product").first().find(".variations_form");if(0<n.length){var r=!0;if(n.find("select[name^=attribute]").each(function(){var e=f(this),t=e.attr("name"),e=e.val();0===e.length?r=!1:i[t]=e}),!r)return window.alert("Please select a product option before adding this product to your cart."),!1;a=n.find(".variation_id").val()}}return a&&i?(t.removeClass("added").addClass("loading updating-icon"),i.quantity=e,i.product_id=a,f("body").trigger("adding_to_cart",[t,i]),f.post(m.getAjaxUrl("woocommerce_add_to_cart"),i,function(e){e&&(e.error&&e.product_url?window.location=e.product_url:"yes"===wc_add_to_cart_params.cart_redirect_after_add?window.location=wc_add_to_cart_params.cart_url:f(document.body).trigger("added_to_cart",[e.fragments,e.cart_hash,t]))}).always(function(){t.addClass("added").removeClass("loading updating-icon")})):window.alert("Please select a product option before adding this product to your cart."),!1})}(),function(){if("undefined"==typeof wc_add_to_cart_params)return;f(document).on("click","button.single_add_to_cart_button.ajax_add_to_cart",function(e){e.preventDefault();var t,a,i,n,r=f(this);return!r.hasClass("disabled")&&!r.hasClass("woosb-disabled")&&(t=(e=r.closest("form.cart")).find("[name=add-to-cart]").val(),a=e.find("input[name=variation_id]").val(),i=e.find(".quantity .qty[name=quantity]").val(),void(0!==(t="add-to-cart"===r.attr("name")?r.val():t)&&(n={product_id:t,variation_id:a},e.serializeArray().map(function(e){var t;"add-to-cart"!==e.name&&(e.name.endsWith("[]")?((t=e.name.substring(0,e.name.length-2))in n||(n[t]=[]),n[t].push(e.value)):n[e.name]=e.value)}),r.attr("data-qty")&&(i=parseInt(r.attr("data-qty"))),n.quantity=i,r.removeClass("added").addClass("loading updating-icon"),f("body").trigger("adding_to_cart",[r,n]),f.post(wc_add_to_cart_params.wc_ajax_url.toString().replace("%%endpoint%%","minimog_add_to_cart"),n,function(e){var t;e&&(e.error&&e.product_url?window.location=e.product_url:(t=r.data("redirect"))&&""!==t?window.location=t:"yes"===wc_add_to_cart_params.cart_redirect_after_add?window.location=wc_add_to_cart_params.cart_url:f(document.body).trigger("added_to_cart",[e.fragments,e.cart_hash,r]))}).always(function(){r.addClass("added").removeClass("loading updating-icon")}))))})}(),f(document.body).on("click",".js-product-variation-term",function(e){e.preventDefault();var e=f(this),t=e.parents(".loop-product-variation-selector").first(),a=t.closest(".product"),i=a.find(".product-main-image"),n=t.data("product_attribute"),r=t.data("product_variations"),t=t.data("product_variations_images"),o=!1;if(e.hasClass("selected"))m.resetContentHTML(a.find(".price")),i.find(".variation-image").remove(),a.removeClass("product-image-switching has-variation-selected"),e.removeClass("selected");else{e.siblings().removeClass("selected"),e.addClass("selected");var s=e.data("term"),e=a.find("select[name="+n+"]");0<e.length&&e.val(s).trigger("change");for(var d,c=r.length-1;0<=c;c--){var l=r[c];l.attributes&&Object.entries(l.attributes).forEach(([e,t])=>{n===e&&t===s&&(o=l)})}!1!==o?(a.addClass("product-image-switching"),e=t[o.variation_id],t=i.children(".product-main-image-img"),(d=f("<img />",{class:"variation-image",src:e,alt:t.attr("alt")})).attr("width",t.attr("width")),d.attr("height",t.attr("height")),m.getImgLoadPromise(d).then(e=>{i.find(".variation-image").remove(),i.append(d),a.removeClass("product-image-switching").addClass("has-variation-selected")}),""!==(e=o.price_html)&&m.setContentHTML(a.find(".price"),f(e).html())):i.find(".variation-image").remove()}}),f(".widget_product_categories").each(function(){var e=f(this),i="opened",e=(e.find(".cat-parent").each(function(){var e=f(this),t=f(this).children("a").clone(),a=$minimog.i18l.all,i=f('<li class="cat-item cat-item-all"></li>'),a=a.replace("%s",t.html());t.html(a),e.hasClass("current-cat")&&(e.removeClass("current-cat"),e.addClass("current-cat-parent"),i.addClass("current-cat")),i.append(t),f(this).children(".children").prepend(i)}),e.on("click","a",function(e){e.stopPropagation();var t=f(this),a=t.parent("li"),t=t.siblings(".children");0<t.length&&(e.preventDefault(),a.hasClass(i)?(a.removeClass(i),a.find("."+i).removeClass(i),t.stop().slideUp(250)):(a.siblings("."+i).removeClass(i).children(".children").stop().slideUp(250),a.addClass(i),t.stop().slideDown(250)))}),e.on("click","li.cat-parent",function(e){f(this).children("a").trigger("click")}),e.find(".current-cat-parent, .current-cat"));e.addClass(i),e.children(".children").stop().slideDown(250)});var t,i=f(".page-sidebar"),n=(f(document).on("click",".btn-js-open-off-sidebar",function(e){e.preventDefault();var e=f(this),e=i.filter(".sidebar-"+e.data("sidebar-target"));0<e.length&&(e.addClass("off-sidebar-active"),u.addClass("off-sidebar-opened"),m.setBodyOverflow(),(e=e.find(".page-sidebar-content-wrap")).outerHeight(window.innerHeight),f.fn.perfectScrollbar)&&!m.isHandheld()&&e.perfectScrollbar({suppressScrollX:!0})}),f(document).on("click",".btn-close-off-sidebar",function(e){e.preventDefault(),u.removeClass("off-sidebar-opened"),i.removeClass("off-sidebar-active"),m.unsetBodyOverflow()}),i.on("click",function(e){e.target===this&&(u.removeClass("off-sidebar-opened"),i.removeClass("off-sidebar-active"),m.unsetBodyOverflow())}),991);function a(){var e,t,a=i.filter(".sidebar-off-mobile");window.innerWidth<=n?(a.addClass("sidebar-switching sidebar-off"),(e=a.find(".page-sidebar-content-wrap")).outerHeight(window.innerHeight),f.fn.perfectScrollbar&&!m.isHandheld()&&e.perfectScrollbar({suppressScrollX:!0})):(a.addClass("sidebar-switching").removeClass("sidebar-off"),u.removeClass("off-sidebar-opened"),m.unsetBodyOverflow(),t=(e=a.find(".page-sidebar-content-wrap")).data("perfectScrollbar"),e.css("height","auto"),f.fn.perfectScrollbar&&t&&t.destroy()),setTimeout(function(){a.removeClass("sidebar-switching")},350)}(u.hasClass("page-sidebar1-off-mobile")||u.hasClass("page-sidebar2-off-mobile"))&&(t=window.innerWidth,a(),e.on("resize",function(){var e=!0;t!==window.innerWidth&&(e=!(t<=n&&window.innerWidth<=n||n<t&&window.innerWidth>n)&&e)&&a(),t=window.innerWidth})),u.on("isw_selected",r),f(document.body).on("change",".product-variation-select",function(){var e=f(this).parents(".minimog-variation-select-wrap").find(".variations_form"),t=f(this).val();if(""!==t){var a=JSON.parse(t);for(const i in a)e.find('select[name="'+i+'"]').val(a[i]).trigger("change")}else e.find(".reset_variations").trigger("click")}),f("body").on("change",'input[name="payment_method"], #billing_country, #shipping_country, #shipping_state, #billing_state',function(){setTimeout(function(){f("body").trigger("update_checkout")},2e3)}),f(document.body).on("show_variation",".variations_form",function(e,t){var a=f(this),i=a.find('input[name="variation_id"]').val();i&&(a.find(".wad-qty-pricing-table").hide(),a.find('.wad-qty-pricing-table[data-id="'+i+'"]').show())})}),f(document).on("found_variation",".variations_form",function(e,t){var e=f(e.target).closest(".product"),a=e.find(".entry-price-wrap").find(".price"),e=e.find(".entry-product-badges");t.price_html&&m.setContentHTML(a,f(t.price_html).html()),"string"==typeof t.sale_flash_html&&(m.setContentHTML(e,e.html()),e.children(".onsale, .flash-sale").remove(),e.prepend(t.sale_flash_html))}),f(document).on("hide_variation",".variations_form",function(e,t){var e=f(e.target).closest(".entry-summary"),a=e.children(".entry-price-wrap").children(".price"),e=e.find(".entry-product-badges");m.resetContentHTML(a),m.resetContentHTML(e)}),f(document).on("change.wc-variation-form",".variations select",function(e){e=f(e.currentTarget);e.closest(".variations_form").find(".variations select").not(e).each(function(){if(2===f(this).children("option").length){var e=f(this).children("option:eq(1)").val();if(f(this).val()!==e)return f(this).val(e).trigger("change"),f(this).siblings(".isw-swatch").find(".isw-term").removeClass("isw-selected").filter('[data-term="'+e+'"]').addClass("isw-selected"),!0}})})}(jQuery);