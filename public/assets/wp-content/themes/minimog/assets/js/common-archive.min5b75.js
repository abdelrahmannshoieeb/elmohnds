!function(s){"use strict";var r=s("body"),d=s(".page-sidebar"),c=window.minimog.Helpers,m="collapsed",u="sidebar-widgets-collapsible";function t(){"function"==typeof s.fn.selectWoo&&s(".minimog-wp-widget-product-layered-nav-dropdown").each(function(){var e=s(this);e.selectWoo({placeholder:e.data("placeholder"),minimumResultsForSearch:5,width:"100%",allowClear:!e.attr("multiple"),language:{noResults:function(){return $minimog.i18l.noMatchesFound}}}).on("select2:unselecting",function(e){s(this).on("select2:opening.cancelOpen",function(e){e.preventDefault(),s(this).off("select2:opening.cancelOpen")})})})}function f(e,t,n,o){var i=s("#archive-layout-switcher");i.length<=0||0<(i=i.find(".switcher-item[data-columns="+o+"]")).length&&(i.siblings().removeClass("selected"),i.addClass("selected"))}function g(e,t={}){var r=s.extend(!0,{},{loadMore:0,scrollTop:0},t),n=(e=decodeURIComponent(e),r.loadMore||history.pushState({},null,e),s(".shop-load-more-button"));s(document.body).trigger("minimog_getting_product"),s.ajax({url:e,type:"GET",dataType:"html",success:function(e){var n=s(e),e=s("#minimog-main-post"),t=e.children(".minimog-grid"),o=(r.loadMore||t.empty(),n.find("#minimog-main-post .grid-item")),i=(t.append(o),[".woocommerce-result-count",".woocommerce-pagination",".form-product-price-filter","#active-filters-bar"]);s(".minimog-wp-widget-filter").each(function(){i.push("#"+s(this).attr("id"))});for(let e=0,t=i.length;e<t;e++){var a=i[e],l=s(a);0<l.length&&(l.empty(),0<(a=n.find(a)).length)&&l.html(a.html())}s(document.body).trigger("minimog_get_product_fragments_loaded",[n]),r.scrollTop&&(t=e.offset().top,t-=198,t=Math.max(0,t),s("html, body").animate({scrollTop:t},300)),d.each(function(){var e=s(this);e.hasClass(u)&&e.find(".widget:not(."+m+")").find(".widget-content").stop().slideDown(250)}),s.fn.perfectScrollbar&&!c.isHandheld()&&d.find(".widget-scrollable").each(function(){s(this).find(".widget-content-inner").perfectScrollbar("update")})},beforeSend:function(){r.loadMore?c.setElementHandling(n):c.setBodyHandling()},complete:function(){r.loadMore?c.unsetElementHandling(n):c.setBodyCompleted()}})}s(document).ready(function(){var e,n,o,i,a,l;e=s("#archive-layout-switcher"),n=s(".minimog-main-post"),o="selected",e.on("click",".switcher-item",function(e){e.preventDefault();var t,e=s(this);e.hasClass(o)||(e.siblings().removeClass(o),e.addClass(o),t=e.data("layout"),e=e.data("columns"),n.addClass("layout-switching"),"grid-one"===t?n.addClass("style-list"):n.removeClass("style-list"),n.css("--grid-columns",e),setTimeout(function(){n.removeClass("layout-switching")},200))}),d.length<=0||(d.find(".widget").each(function(){var e=s(this);if(e.hasClass("widget_block"))return!0;e.children().not(".widget-title, .widgettitle, .widget-instance, .widget-content").wrapAll('<div class="widget-content"><div class="widget-content-inner"></div></div>'),e.hasClass("widget-scrollable")&&s.fn.perfectScrollbar&&!c.isHandheld()&&e.find(".widget-content-inner").perfectScrollbar()}),d.each(function(){var e=s(this);e.hasClass(u)&&e.on("click",".widget-title, .widgettitle",function(e){var t=s(this).closest(".widget");t.hasClass(m)?(t.removeClass(m),t.find(".widget-content").stop().slideDown(250)):(t.addClass(m),t.find(".widget-content").stop().slideUp(250))})})),"infinite"===(l=s(".woocommerce-pagination")).data("type")&&(i=0,(a=s(window)).on("scroll",function(){var e,t=s(this).scrollTop();i<t&&(e=a.height(),e=parseInt(.9*e),l.offset().top+l.outerHeight(!0)-e<=t)&&((e=l.find(".shop-load-more-button")).hasClass("updating-icon")||e.trigger("click")),i=t})),t(),s(document.body).on("MinimogGridLayoutColumnsChange",f),s(document.body).on("click",".minimog-wp-widget-filter .filter-link",function(e){e.preventDefault();var e=s(this),t=e.parent("li"),n=e.closest("ul"),o=e.attr("href");if(n.hasClass("single-choice")){if(t.hasClass("chosen"))return;t.addClass("chosen").siblings().removeClass("chosen")}else e.parent("li").toggleClass("chosen");n=s(this).closest(".page-sidebar");0<n.length&&(r.removeClass("off-sidebar-opened"),n.removeClass("off-sidebar-active"),c.unsetBodyOverflow()),g(o)}),s(document.body).on("click",".js-product-filter-link",function(e){e.preventDefault();e=s(this);e.hasClass("disabled")||g(e.attr("href"))}),s(document.body).on("change",".minimog-wp-widget-product-layered-nav-dropdown",function(){s(this).closest("form").trigger("submit")}),s(document.body).on("submit",".minimog-wp-widget-product-layered-nav-form",function(){var e=s(this),t=e.find(".filter-name"),n=e.find(".filter-query-type"),o=t.val(),e=e.attr("action"),e=c.addUrlParam(e,t.attr("name"),o);return g(e=0<n.length?""===o?c.removeUrlParam(e,n.attr("name")):c.addUrlParam(e,n.attr("name"),n.val()):e),!1}),s(document.body).on("submit",".form-product-price-filter",function(){var e=s(this),t=e.find("#min_price").val(),n=e.find("#max_price").val(),e=e.attr("action"),e=c.addUrlParam(e,"min_price",t);return g(c.addUrlParam(e,"max_price",n)),!1}),s(document.body).on("click",".woocommerce-pagination a.page-numbers",function(e){e.preventDefault(),g(s(this).attr("href"),{scrollTop:1})}),s(document.body).on("click",".shop-load-more-button",function(e){e.preventDefault(),g(s(this).attr("data-url"),{loadMore:1})}),s(document.body).on("change",".js-product-ordering select.orderby",function(){g(c.addUrlParam(window.location.href,"orderby",s(this).val()))})}),s(document.body).on("minimog_get_product_fragments_loaded",function(){t(),s(document.body).trigger("init_price_filter")})}(jQuery);